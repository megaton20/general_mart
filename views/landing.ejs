
<style>
  .overlay-buttons {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    justify-content: center;
}

</style>
<%- include('./partials/openNav') %>

<main class="main">

  <div class="container">
    <%- include ('./partials/messages') %>
  </div>




  <div class="container mt-4">
    <div class="row">

      <div class="col-12 col-md-8 order-1 order-md-2">
        
        <div id="carouselExample" class="carousel slide carousel-fade shadow" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item">
              <img src="/landing-imgs/free.jpg" class="d-block w-100" alt="Slide 5">
            </div>
            <div class="carousel-item active">
              <img src="/landing-imgs/vvvvv.png" class="d-block w-100" alt="Slide 6">
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>

        <div class="mt-4">
          <div class="row">
            <div class="col-4"><%- include ('./partials/clients') %></div>
            <div class="col-4"> 
              <div class=" card shadow border-1 rounded" style="overflow: hidden;">
                <img src="/landing-imgs/1.GIF" class="d-block w-100"  alt="Slide">
              </div>
            </div>
            <div class="col-4"> 
              <div class=" card shadow border-1 rounded" style="overflow: hidden;">
                <img src="/landing-imgs/short.GIF" class="d-block w-100"  alt="Slid">
              </div>
            </div>
          </div>
        </div>

        <%- include ('./partials/points') %>
      </div>

  

      <!-- Category Cards (Appears second on mobile) -->
      <div class="col-md-4 order-2 order-md-1 d-md-block">
        <div id="service-details" class="service-details section">
          <div class="service-box mb-4">
            <div class="services-list">
              <% allCategory.forEach(data=> { %>
                <a href="/user/category/<%= data.Category_name %>#" class="categoryButton"
                  data-category="<%= data.Category_name %>" 
                  title="<%= data.details %>">
                 <i class="fa fa-list"></i>
                 <span><%= data.Category_name %></span>
               </a>
                <% }); %>
            </div>
          </div>
        </div>
        <!-- Add more category cards as needed -->
      </div>
    </div>

<!-- points -->



  </div>

  <div class="container-for-large-screens">

  

  <!-- Part 1: Products -->
  <% if (firstHalf && firstHalf.length> 0) { %>
    <% firstHalf.forEach(category=> { %>
      <% if (category.products && category.products.length> 0) { %> <!-- Only render card if products are present -->
        <div class="category-card ">
          <div class="top-cat">
                <p><%= category.categoryName %></p>
            <div class="">
              <a href="/user/category/<%= category.categoryName %>#product-section">See all</a>
            </div>
          </div>

          <div class="scroll-items">
            <div class="products-grid my-box-shadow">
              <% category.products.forEach(product=> { %>
                <div class="landing-item my-box-shadow" style="height: 250px; margin-bottom: 20px;">
                  <a href="/user/product-details/<%= product.id %>" class="home-card">

                    <div class="landing-image">
                      <img src="/uploads/<%= product.image %>" alt="<%= product.ProductName %>">
                    </div>
                    <div class="landing-details">
                      <p class="text-truncate">
                        <%= product.ProductName %>
                      </p>
                    </div>
                    <div class="item-prices">
                      <p>₦<span class="formated-prices"><%= product.price %></span>
                      </p>
                      <p class="old-price text-grey">₦ <%= product.old_price %>
                      </p>
                    </div>
                  </a>
                </div>
                <% }) %>
            </div>
          </div>
        </div>
        <% } %> <!-- End of condition to render only if products exist -->
          <% }) %>
            <% } %>

            <%- include ('./partials/quote') %>

              <!-- Advertisement or other content -->
              <!-- <div class="advertisement">
                <p>Advertisement Area</p>
              </div> -->





              <!-- Part 2: Products -->
              <% if (secondHalf && secondHalf.length> 0) { %>
                <% secondHalf.forEach(category=> { %>
                  <% if (category.products && category.products.length> 0) { %>
                    <!-- Only render card if products are present -->
                    <div class="category-card ">
                      <div class="top-cat">
                        <div class=""><p>
                          <%= category.categoryName %>
                        </p></div>
                      <div class="">
                        <a href="/user/category/<%= category.categoryName %>#product-section">See all</a>
                      </div>
                    </div>

                      <div class="scroll-items">
                        <div class="products-grid my-box-shadow">
                          <% category.products.forEach(product=> { %>
                            <div class="landing-item my-box-shadow" style="height: 250px; margin-bottom: 20px;">
                              <a href="/user/product-details/<%= product.id %>" class="home-card">

                                <div class="landing-image">
                                  <img src="/uploads/<%= product.image %>" alt="<%= product.ProductName %>">
                                </div>

                                <div class="landing-details">
                                  <p class="text-truncate">
                                    <%= product.ProductName %>
                                  </p>
                                </div>
                                <div class="item-prices">
                                  <p>₦<span class="formated-prices"><%= product.price %></span>
                                  </p>
                                  <p class="old-price text-grey">₦ <%= product.old_price %>
                                  </p>
                                </div>
                              </a>
                            </div>
                            <% }) %>
                        </div>
                      </div>
                    </div>
                    <% } %> <!-- End of condition to render only if products exist -->
                      <% }) %>
                        <% } %>


                        
  </div>


  <div class="container">
 <!-- Modal -->
<% if (showModal) { %>
  <div class="modal fade" id="blackFridayModal" tabindex="-1" role="dialog" aria-labelledby="blackFridayModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
              <div class="modal-body p-0">
                  <div class="position-relative">
                      <img src="/images/shelf.jpg" class="img-fluid" alt="Black Friday Sale">
                      <!-- Buttons on top of the image -->
                      <div class="overlay-buttons">
                          <a href="/handler" class="btn btn-primary m-2"> Friday Sales</a>
                          <form action="/dismiss-modal" method="POST">
                              <button type="submit" class="btn btn-secondary m-2">Later</button>
                          </form>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
<% } %>
  </div>

                          <br>
                          <br>


<%- include ('./partials/openFooter')%>

</main>
    

<script>
  // Show the modal only if the session variable is not set
    // Wait for the DOM to be fully loaded before executing
    document.addEventListener('DOMContentLoaded', function () {
        // Only show the modal if the session variable is not set
        <% if (showModal) { %>
            var modal = new bootstrap.Modal(document.getElementById('blackFridayModal'));
            modal.show();
        <% } %>

        // "Later" button click handling
        var laterButton = document.getElementById('laterButton');
        if (laterButton) {
            laterButton.addEventListener('click', function () {
                // Set session variable to hide the modal on reload
                sessionStorage.setItem('blackFridayShown', 'true');
            });
        }
    });




</script>




